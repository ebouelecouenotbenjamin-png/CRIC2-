const translations = {
  fr: {
    ministry: "Ministère des Finances",
    "site.title": "Centre Régional des Impôts du Centre 2",
    dgi: "Direction Générale des Impôts",
    "nav.home": "CRIC2",
    "nav.le_regional": "Le régional",
    "nav.organigramme": "Organigramme",
    "nav.nos_structures": "Nos structures",
    "nav.missions": "Missions",
    "nav.services": "Services",
    "nav.teledeclaration": "Télédeclaration",
    "nav.immatriculation": "Immatriculation",
    "nav.quittance": "Quitance",
    "nav.fichier": "Fichier des contribuables",
    "nav.documentations": "Documentations",
    "nav.charte": "Charte contribuable",
    "nav.news": "News",
    "nav.rapport": "Rapport annuel",
    "nav.code": "Code général des Impôts",
    "nav.lois": "Lois et réglements",
    "nav.stats": "Statistiques",
    "nav.tutoriels": "Tutoriels",
    "nav.contact": "Contact",
    "news.all": "Toute l'actualité",
    "news.cric2": "Actualités CRIC2",
    "news.headline": "À la une",
    "news.campaign": "CAMPAGNE IRPP ET TAXE FONCIERE 2025",
    "news.formations": "FORMATIONS RECENTES",
    "news.press": "COMMUNIQUE-PRESSE",
    "news.read_more": "Toute l'actualité",
    "site.csi_title": "CSI-EPA",
    "site.csi_desc": "Est une structure des services du CRIC2 — localisation et détails.",
    "site.cime_title": "CIME Yaoundé Ouest",
    "site.cime_desc": "Est une structure des services du CRIC2 — localisation et détails.",
    "site.cflp2_title": "CFLP Yaoundé 2",
    "site.cflp3_title": "CFLP Yaoundé 3",
    "site.cflp6_title": "CFLP Yaoundé 6",
    "site.cflp7_title": "CFLP Yaoundé 7",
    "site.cflp_desc": "Est une structure des services du CRIC2 — localisation et détails.",
    "quick.access": "Accès rapide",
    "service.irpp": "Déclaration annuelle des revenus des particuliers",
    "service.acf": "Authentification ACF",
    "service.dsf": "DSF",
    "service.bef": "Bénéficiaire Effectif",
    "service.documents": "Documents fiscaux",
    "service.dpr": "Déclaration Pré-remplie (DPR)",
    "service.otp": "OTP / E-Billing",
    "services_en_ligne": "Services en ligne",
    "index.news": "Actualités",
    "index.presentation": "Présentation du CRIC2",
    "index.presentation_text": "Le Centre Régional des Impôts du Centre 2 (CRIC2) est une structure des services déconcentrés de la Direction Générale des Impôts (DGI). Il a été créé à la faveur de l'Arrêté N°000361/MINFI du 19 Juin 2019. Ses services sont situés à Nylon Bastos. Le CRIC2 comprend six structures opérationnelles, couvrant le flanc ouest du département du Mfoundi, à savoir:",
    "index.read_more": "Lire la suite",
    "index.services": "Services",
    "index.services_desc": "Le CRIC2 comprend six structures opérationnelles, couvrant le flanc ouest du département du Mfoundi",
    "index.all_services": "Tous les services",
    "index.documentations": "Documentations",
    "index.documentations_desc": "Le CRIC2 comprend six structures opérationnelles, couvrant le flanc ouest du département du Mfoundi",
    "index.see_more": "Voir plus",
    "footer.copyright": "© 2025 Centre Régional des Impôts du Centre 2",
    "footer.call_center": "Centre d'appel",
    "footer.follow": "Suivez nous",
    "footer.structures": "Nos structures",
    "footer.quick_access": "Accès rapide",
    "footer.csi": "CSI EPA",
    "footer.cime": "CIME Yaoundé Ouest",
    "footer.cflp2": "CFLP Yaoundé 2",
    "footer.cflp3": "CFLP Yaoundé 3",
    "footer.cflp6": "CFLP Yaoundé 6",
    "footer.cflp7": "CFLP Yaoundé 7",
    "contact.title": "CONTACTS",
    "contact.info": "Contacter-nous pour plus d'informations",
    "contact.description": "Pour nous joindre veillez nous contacter <br> - Par appel au <span>8200</span> <br> -Par email au <span>www.CRIC2@gmail.com</span> <br> <br> Pour avoir des informations sur une de nos structures veillez cliquer sur le nom de la structure en question ou se rendre à &nbsp &nbsp",
    "contact.our_structures": "Nos structures",
    "contact.form_title": "Contactez-nous",
    "contact.name": "Votre nom complet*",
    "contact.email": "Votre adresse de courriel*",
    "contact.subject": "Objet/ motif*",
    "contact.message": "Votre message* (soyez bref et précis)",
    "contact.submit": "Envoyer",
    "le_regional.title": "Le chef du centre du CRIC2",
    "le_regional.subtitle": "À propos du chef de centre",
    "le_regional.description": "Le chef de centre du CRIC2 est responsable de la gestion et de la coordination des activités fiscales dans la région. Il veille à la mise en œuvre des politiques fiscales de la Direction Générale des Impôts (DGI) et supervise les opérations des différentes structures sous sa responsabilité.",
    "mission.title": "Missions du CRIC2",
    "mission.content": "Le CRIC2 a pour missions principales: assurer la collecte des impôts, contrôler les contribuables, et promouvoir le civisme fiscal auprès des citoyens.",
    "nos_centres.title": "Nos Centres",
    "nos_centres.content": "Découvrez les différents centres du CRIC2 et leurs services spécifiques.",
    "presentation.title": "Présentation Complète",
    "presentation.content": "Apprenez-en plus sur l'histoire, la structure et les objectifs du Centre Régional des Impôts du Centre 2.",
    "service.title": "Nos Services",
    "service.content": "Consultez la liste complète des services offerts par le CRIC2 aux contribuables.",
    "service.teledeclaration_timbres_title": "TÉLÉDÉCLARATION DES TIMBRES",
    "service.teledeclaration_timbres_desc": "Est une structure des services du CRIC2. Elle assure la télé-déclaration et le traitement des timbres fiscaux.",
    "service.teledeclaration_dsf_obnl_title": "TÉLÉDÉCLARATION DSF OBNL",
    "service.teledeclaration_dsf_obnl_desc": "Structure en charge de la télédéclaration DSF pour les organisations à but non lucratif (OBNL).",
    "service.formation_etablissements_title": "FORMATION DES ETABLISSEMENTS",
    "service.formation_etablissements_desc": "Service dédié à la formation et l'accompagnement des établissements pour leurs obligations fiscales.",
    "tutoriels.title": "Tutoriels",
    "tutoriels.content": "Des guides pratiques pour utiliser nos services en ligne et comprendre vos obligations fiscales.",
    "tutoriels.guide_immatriculation_title": "Guide de l'immatriculation en ligne",
    "tutoriels.guide_irpp_title": "Guide de la Déclaration IRPP",
    "tutoriels.guide_bef_title": "Guide de la Déclaration BEF",
    "tutoriels.guide_dsf_title": "Guide de la Télédéclaration DSF",
    "tutoriels.guide_docf_title": "Guide pour générer un document fiscal",
    "tutoriels.guide_tim_title": "Guide de la Télédéclaration des Timbres",
    "tutoriels.pdf": "PDF",
    "tutoriels.video": "Vidéo",
    "tutoriels.ppt": "Powerpoint",
    "tutoriels.all_guides": "Tous les tutoriels",
    "documentations.title": "Documentations",
    "documentations.content": "Accédez à tous les documents officiels, chartes et réglementations fiscales.",
    "documentations.charte_title": "Charte contribuable",
    "documentations.charte_desc": "Texte et explications de la charte du contribuable disponible au CRIC2.",
    "documentations.news_title": "News",
    "documentations.news_desc": "Toutes les actualités et communiqués relatifs au CRIC2.",
    "documentations.rapport_title": "Rapport annuel",
    "documentations.rapport_desc": "Rapports annuels et bilans d'activité du CRIC2.",
    "documentations.stats_title": "Statistiques",
    "documentations.stats_desc": "Données et statistiques fiscales publiées par le CRIC2.",
    "documentations.lois_title": "Lois et réglements",
    "documentations.lois_desc": "Textes législatifs et règlements applicables.",
    "documentations.code_title": "Code général des impôts",
    "documentations.code_desc": "Textes et extraits du Code général des Impôts.",
    "btn.more": "Plus",
    "dematerialisation.title": "Dématérialisation des services du CSI-EPA",
    "dematerialisation.desc": "Initiatives et outils de dématérialisation pour faciliter les démarches des contribuables.",
    "date.sep10": "le 10 septembre",
    "date.jan15": "le 15 Janvier"
    ,
    "social.facebook": "Facebook",
    "social.linkedin": "LinkedIn",
    "social.whatsapp": "WhatsApp"
  },
  en: {
    ministry: "Ministry of Finance",
    "site.title": "Regional Tax Center Centre 2",
    dgi: "General Directorate of Taxes",
    "nav.home": "CRIC2",
    "nav.le_regional": "Regional",
    "nav.organigramme": "Organization chart",
    "nav.nos_structures": "Our structures",
    "nav.missions": "Missions",
    "nav.services": "Services",
    "nav.teledeclaration": "E-filing",
    "nav.immatriculation": "Registration",
    "nav.quittance": "Receipt",
    "nav.fichier": "Taxpayers file",
    "nav.documentations": "Documentation",
    "nav.charte": "Taxpayer charter",
    "nav.news": "News",
    "nav.rapport": "Annual report",
    "nav.code": "Tax Code",
    "nav.lois": "Laws and regulations",
    "nav.stats": "Statistics",
    "nav.tutoriels": "Tutorials",
    "nav.contact": "Contact",
    "news.all": "All news",
    "news.cric2": "CRIC2 news",
    "news.headline": "Headline",
    "news.campaign": "IRPP CAMPAIGN AND PROPERTY TAX 2025",
    "news.formations": "RECENT TRAININGS",
    "news.press": "PRESS RELEASE",
    "news.read_more": "All news",
    "site.csi_title": "CSI-EPA",
    "site.csi_desc": "A local CRIC2 service — location and details.",
    "site.cime_title": "CIME Yaoundé West",
    "site.cime_desc": "A local CRIC2 service — location and details.",
    "site.cflp2_title": "CFLP Yaoundé 2",
    "site.cflp3_title": "CFLP Yaoundé 3",
    "site.cflp6_title": "CFLP Yaoundé 6",
    "site.cflp7_title": "CFLP Yaoundé 7",
    "site.cflp_desc": "A local CRIC2 service — location and details.",
    "quick.access": "Quick access",
    "service.irpp": "Annual personal income declaration",
    "service.acf": "ACF authentication",
    "service.dsf": "DSF",
    "service.bef": "Beneficiary Effect",
    "service.documents": "Fiscal documents",
    "service.dpr": "Pre-filled declaration (DPR)",
    "service.otp": "OTP / E-Billing",
    "service.teledeclaration_timbres_title": "E-FILING OF STAMPS",
    "service.teledeclaration_timbres_desc": "A CRIC2 service that handles electronic filing and processing of fiscal stamps.",
    "service.teledeclaration_dsf_obnl_title": "DSF E-FILING FOR NPOs",
    "service.teledeclaration_dsf_obnl_desc": "Service responsible for DSF e-filing for non-profit organizations.",
    "service.formation_etablissements_title": "TRAINING FOR INSTITUTIONS",
    "service.formation_etablissements_desc": "Service providing training and support to institutions for their tax obligations.",
    "services_en_ligne": "Online services",
    "index.news": "News",
    "index.presentation": "CRIC2 Presentation",
    "index.presentation_text": "The Regional Tax Center Centre 2 (CRIC2) is a decentralized structure of the General Directorate of Taxes (DGI). It was created by Order No. 000361/MINFI of June 19, 2019. Its services are located in Nylon Bastos. CRIC2 comprises six operational structures, covering the western flank of the Mfoundi department, namely:",
    "index.read_more": "Read more",
    "index.services": "Services",
    "index.services_desc": "CRIC2 comprises six operational structures, covering the western flank of the Mfoundi department",
    "index.all_services": "All services",
    "index.documentations": "Documentation",
    "index.documentations_desc": "CRIC2 comprises six operational structures, covering the western flank of the Mfoundi department",
    "index.see_more": "See more",
    "footer.copyright": "© 2025 Regional Tax Center Centre 2",
    "footer.call_center": "Call center",
    "footer.follow": "Follow us",
    "footer.structures": "Our structures",
    "footer.quick_access": "Quick access",
    "footer.csi": "CSI EPA",
    "footer.cime": "CIME Yaoundé West",
    "footer.cflp2": "CFLP Yaoundé 2",
    "footer.cflp3": "CFLP Yaoundé 3",
    "footer.cflp6": "CFLP Yaoundé 6",
    "footer.cflp7": "CFLP Yaoundé 7",
    "contact.title": "CONTACTS",
    "contact.info": "Contact us for more information",
    "contact.description": "To reach us please contact us <br> - By calling <span>8200</span> <br> - By email <span>www.CRIC2@gmail.com</span> <br> <br> For information about one of our structures please click on the name of the structure in question or go to &nbsp &nbsp",
    "contact.our_structures": "Our structures",
    "contact.form_title": "Contact us",
    "contact.name": "Your full name*",
    "contact.email": "Your email address*",
    "contact.subject": "Subject/ reason*",
    "contact.message": "Your message* (be brief and precise)",
    "contact.submit": "Send",
    "documentations.charte_title": "Taxpayer charter",
    "documentations.charte_desc": "Text and explanations of the taxpayer charter available at CRIC2.",
    "documentations.news_title": "News",
    "documentations.news_desc": "All news and press releases related to CRIC2.",
    "documentations.rapport_title": "Annual report",
    "documentations.rapport_desc": "Annual reports and activity summaries from CRIC2.",
    "documentations.stats_title": "Statistics",
    "documentations.stats_desc": "Fiscal data and statistics published by CRIC2.",
    "documentations.lois_title": "Laws and regulations",
    "documentations.lois_desc": "Applicable legislative texts and regulations.",
    "documentations.code_title": "Tax Code",
    "documentations.code_desc": "Texts and excerpts from the General Tax Code.",
    "btn.more": "More",
    "dematerialisation.title": "Dematerialization of CSI-EPA services",
    "dematerialisation.desc": "Initiatives and digital tools to simplify taxpayer procedures.",
    "date.sep10": "September 10",
    "date.jan15": "January 15",
    "tutoriels.content": "Practical guides to use our online services and understand your tax obligations.",
    "tutoriels.guide_immatriculation_title": "Online Registration Guide",
    "tutoriels.guide_irpp_title": "IRPP Filing Guide",
    "tutoriels.guide_bef_title": "BEF Filing Guide",
    "tutoriels.guide_dsf_title": "DSF E-Filing Guide",
    "tutoriels.guide_docf_title": "Guide to Generate a Fiscal Document",
    "tutoriels.guide_tim_title": "Stamp E-Filing Guide",
    "tutoriels.pdf": "PDF",
    "tutoriels.video": "Video",
    "tutoriels.ppt": "PowerPoint",
    "tutoriels.all_guides": "All tutorials"
    ,
    "social.facebook": "Facebook",
    "social.linkedin": "LinkedIn",
    "social.whatsapp": "WhatsApp"
  }
};

function initializeLanguage() {
  const savedLang = localStorage.getItem('site_lang') || navigator.language.substring(0, 2);
  const lang = savedLang.startsWith('en') ? 'en' : 'fr';
  document.documentElement.lang = lang;
  updateActiveButton(lang);
  translatePage(lang);
}

function updateActiveButton(lang) {
  const frBtn = document.getElementById('lang-fr');
  const enBtn = document.getElementById('lang-en');
  if (frBtn && enBtn) {
    frBtn.classList.toggle('active', lang === 'fr');
    enBtn.classList.toggle('active', lang === 'en');
  }
}

function translatePage(lang) {
  // Traduction du contenu textuel
  const elements = document.querySelectorAll('[data-i18n]');
  elements.forEach(element => {
    const key = element.getAttribute('data-i18n');
    if (translations[lang] && translations[lang][key]) {
      // Remplacer le contenu texte si applicable
      try {
        element.textContent = translations[lang][key];
      } catch (e) {
        // certains éléments n'ont pas de textContent modifiable, ignorer
      }

      // Si l'élément est un champ de formulaire, appliquer en priorité au placeholder
      const tag = element.tagName ? element.tagName.toLowerCase() : '';
      if ((tag === 'input' || tag === 'textarea' || tag === 'select') && element.hasAttribute('placeholder')) {
        element.setAttribute('placeholder', translations[lang][key]);
      }

      // Si l'élément a un attribut title explicite, le mettre à jour
      if (element.hasAttribute && element.hasAttribute('title')) {
        element.setAttribute('title', translations[lang][key]);
      }

      // Si l'élément est une image et possède alt, mettre à jour alt
      if (tag === 'img' && element.hasAttribute('alt')) {
        element.setAttribute('alt', translations[lang][key]);
      }
    }
  });

  // Traduction des attributs : placeholder, title, alt
  const attrMappings = [
    {attr: 'data-i18n-placeholder', target: 'placeholder'},
    {attr: 'data-i18n-title', target: 'title'},
    {attr: 'data-i18n-alt', target: 'alt'}
  ];

  attrMappings.forEach(mapping => {
    const nodes = document.querySelectorAll('[' + mapping.attr + ']');
    nodes.forEach(node => {
      const key = node.getAttribute(mapping.attr);
      if (translations[lang] && translations[lang][key]) {
        try {
          node.setAttribute(mapping.target, translations[lang][key]);
        } catch (e) {
          // certains éléments peuvent ne pas accepter certains attributs ; ignorer silencieusement
        }
      }
    });
  });

  // Sauvegarde de la langue et attribut lang
  localStorage.setItem('site_lang', lang);
  document.documentElement.lang = lang;
}

document.addEventListener('DOMContentLoaded', function() {
  initializeLanguage();
  
  const frBtn = document.getElementById('lang-fr');
  const enBtn = document.getElementById('lang-en');
  
  if (frBtn) {
    frBtn.addEventListener('click', () => {
      updateActiveButton('fr');
      translatePage('fr');
    });
  }
  
  if (enBtn) {
    enBtn.addEventListener('click', () => {
      updateActiveButton('en');
      translatePage('en');
    });
  }
});
